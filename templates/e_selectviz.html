<table class="bottomTable">
<thead>
	<th>1. Select {{source}}</th>
	<th>2. Launch Visualization</th>
</thead>
<tbody>
<tr>
<td>
	{% if source = 'Documents' %}
	
		<span id="documentsSelectedCountDiv">0</span> docs 
		(select <a href="" onclick='selectAllDocs();return false;'>all</a> | 
		<a href="" onclick='deselectAllDocs();return false;'>none</a>) 
		<div class="selectedList" id="documentsSelectedListDiv"></div>
		
	{% endif %}
	{% if source = 'Speakers' %}
<!-- ============================================================================================= -->	
		<div class="speakerSelectionLeftHeader">
			<div class="speakerSelectionLeftParts">
				<a href='' id="goCreateSet">create new set</a>
			</div>
			<div class="speakerSelectionLeftParts">
select <a href="" onclick='selectAllSpeakers();return false;'>all</a> | 
<a href="" onclick='deselectAllSpeakers();return false;'>none</a> | 
<!-- ========================================= SPEAKERS SELECTION DropDownCheckList-->
<select id="spkSelectDropDownList" multiple="multiple">
{% for c in sTable.columns %}
	{% if c.values|length > 2 %}
		<optgroup label="{{c.label}}">
			{% for a in c.values %}
				<option id="option:{{forloop.parentloop.counter0}}:{{a.name}}">{{a.name}}</option>
			{% endfor %}
			<!--<option selected="selected">selectedName</option>-->
		</optgroup>
	{% endif %}
{% endfor%}
</select>
<!-- ========================================= -->
			</div>
		</div>
<!-- ============================================================================================= -->				
		<div class="speakerSelectionLeftCenter">
			<div class="inTableListContainer">
				<ul id="speakerSetsList"> 		<!-- ===================== SpeakerSets -->
				{% if speakersets %}
				{% for spks in speakersets %}
					<li id="spkset_{{spks.id}}"><a href='' onclick='onSpeakerSetClick({{enquete.id}},{{spks.id}});return false;'>({{spks.speakers.count}}) {{spks.name}}</a></li>
				{% endfor %}
				{% else %}
					<li id="nospeakerset">no set</li>
				{% endif %}
				</ul>
			</div>
			<div class="inTableListContainer">
				<ul id="speakerSelectedList"> 	<!-- ===================== Speakers Selected -->
					<li id="nospeaker">no speaker</li>
				</ul>		
			</div>
		</div>
<!-- ============================================================================================= -->
		<div class="speakerSelectionLeftBottom">
			<div class="speakerSelectionLeftParts">
<a href='' onclick='doGetAtUrl("{% url reanalyseapp.views.deleteSpeakerSets enquete.id %}");$("#speakerSetsList").html("<li id=\"nospeakerset\">no set</li>");return false;'>delete all sets</a>
			</div>
			<div class="speakerSelectionLeftParts">
total: <span id="speakerSelectedCountDiv">0</span> speakers 
			</div>
		</div>
<!-- ============================================================================================= -->
	{% endif %}
</td>
<td>
	<ul>
	
<li>
	<a href="" onclick='createVisualization({{enquete.id}},"Graph_SpeakersAttributes",{});return false;'>Graph Speakers-Attributes</a>
	<!-- ========================== ATTRIBUTE SELECTION DropDownCheckList-->
		<select id="attSelectDropDownList" multiple="multiple">
		{% for c in attributeTypes %}
			{% if c.values|length > 2 %}
				<option id="option:{{c.id}}:{{c.label}}">{{c.label}}</option>
			{% endif %}
		{% endfor%}
		</select>
	<!-- ========================== -->
</li>
<li><a href="" onclick='createVisualization({{enquete.id}},"Graph_SpeakersSpeakers",{});return false;'>Graph Speakers-Speakers</a></li>
<li><a href="" onclick='createVisualization({{enquete.id}},"Graph_SpeakersWords",{});return false;'>Graph Speakers-Words</a></li>
<li id="Cloud_SolrSpeakerTagCloud"><a href='' id="goCreateTagCloud">Tag Cloud</a></li>
<li><a href="" onclick='createVisualization({{enquete.id}},"TexteStreamTimeline",{"textes":selectedTexteIds});return false;'>TexteStreamTimeline (for each text)</a></li>
<li><a href="" onclick='createVisualization({{enquete.id}},"Attributes",{"speakers":selectedSpeakerIds});return false;'>Attributes</a></li>
<li><a href="" onclick='createVisualization({{enquete.id}},"Overview",{});return false;'>Overview</a></li>
<li><a href="" onclick='createVisualization({{enquete.id}},"StudyOverview",{});return false;'>Study Overview</a></li>
<!--<li><a href="" onclick='createVisualization({{enquete.id}},"SpeakersByText");return false;'>(all) Speakers/Texts</a></li>-->
<!--<li><a href="" onclick='createVisualization({{enquete.id}},"WordsBySpeaker");return false;'>(t) Words/Speaker</a></li>-->
<!--<li><a href="" onclick='createVisualization({{enquete.id}},"Cloud_TeiSpeakerTagCloud");return false;'>(s) from TEI</a></li>-->
	
	</ul>				
</td>
</tr>
</tbody>
</table>

<script type="text/javascript">
	$(document).ready(function() {
		//////////////////////////////////////////////// GO for creation NEW SPEAKER SET
		$("#goCreateSet").click( function(event) {
			goCreateSpeakerSet({{enquete.id}},"{% url reanalyseapp.views.makeSpeakerSet enquete.id %}");
			// to avoid click getting caught by 'html' ie removing form !
			event.stopPropagation();
			event.preventDefault();
			return false;
		});
		$("#goCreateTagCloud").click( function(event) {
			goCreateTagCloud({{enquete.id}},selectedSpeakerIds);
			// to avoid click getting caught by 'html' ie removing form !
			event.stopPropagation();
			event.preventDefault();
			return false;
		});		
		
		//////////////////////////////////////////////// Manage DropDownList jquery plugin to select by Attributes
		$("#spkSelectDropDownList").dropdownchecklist({
			'emptyText':'by attribute',
			//'onItemClick':onDropDownSelectClick,
			'onComplete': function(selector) {
				//console.log("dropDownSelected:"+checkbox+":"+selector);
				var theSelec = $("#spkSelectDropDownList option:selected");
				for(var k=0;k<theSelec.length;k++) {
					var theid = theSelec[k].id ; // looks like "option:12:Divers Droite"
					console.log("dropDownSelectedId:"+theid);
					selectFrom(theid.split(":")[1],theid.split(":")[2]);
				}
			},
			'maxDropHeight':150,
			'positionHow':'absolute',//'relative'
			'width':50,
			'minWidth':150,
			//'zIndex':9999,
		});
		
		//////////////////////////////////////////////// attribute selection for graph viz
		$("#attSelectDropDownList").dropdownchecklist({
			'emptyText':'select attributeTypes for graph...',
			'onComplete': function(selector) {
				//console.log("dropDownSelected:"+checkbox+":"+selector);
				var theSelec = $("#attSelectDropDownList option:selected");
				selectedAttributeTypesIds = new Array();
				for(var k=0;k<theSelec.length;k++) {
					var theid = theSelec[k].id ; // looks like "option:12:Divers Droite"
					selectedAttributeTypesIds.push( theid.split(":")[1] );
				}
				console.log("attributeDropDownSelectedIds:"+selectedAttributeTypesIds);
			},
			'maxDropHeight':150,
			'positionHow':'absolute',//'relative'
		});
	});
</script>
